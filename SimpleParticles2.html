<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title></title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/base.css">
</head>
<body>


	<script src="js/libs/jquery-1.5.1.min.js"></script>
	<script src="js/libs/modernizr-1.7.min.js"></script>
	<script src="js/SimpleParticle.js"></script>

	<script> 

	 	$(document).ready(function(){

			// screen size variables
			var SCREEN_WIDTH = window.innerWidth,
					SCREEN_HEIGHT = window.innerHeight,
					HALF_WIDTH = window.innerWidth / 2,
				  HALF_HEIGHT = window.innerHeight / 2;

			// canvas element and 2D context
			var	canvas = document.createElement( 'canvas' ),
					context = canvas.getContext( '2d' ),
					container = document.createElement( 'div' );

			// particles
			var particle,
					particles = [],
					NEW_PARTICLE_RATE = 10,
					MAX_PARTICLES = 300;

		  // fiziks
			var TO_RADIANS = Math.PI/180,
					TO_DEGREES = 180/Math.PI,
					ROTATION_RATE = 20,
					currentAngle = 0;
			
			/*
			*	Create canvas html and particle objects
			*/
			function init() {
	
				// Canvas html setup
				document.body.appendChild(container);
				container.appendChild(canvas); 
				canvas.width = SCREEN_WIDTH; 
				canvas.height = SCREEN_HEIGHT;

				// Set main loop to run at 33 fps
				setInterval(loop, 1000 / 30);
			}

			
			
			function makeParticle(particleCount) {

				for(var i=0; i<particleCount;i++) {

					// create a new particle in the middle of the stage
					var particle = new Particle(HALF_WIDTH, HALF_HEIGHT); 

					// give it a random x and y velocity
					particle.velX = Math.random()*20-10; 
					particle.velY = Math.random()*10-5; 

					var angle =  (currentAngle  + (Math.random() * 50)) * TO_RADIANS; 
					var speed = (Math.random()*10) +10 ; 

					particle.velX = Math.sin(angle) * speed; 
					particle.velY = Math.cos(angle) * speed; 

					particle.drag = 0.96;
					particle.gravity = 0.3; 

					particle.size = 2; 
					particle.shrink  = 1.02; 
					particle.fade = 0.02;

					// add it to the array
					particles.push(particle); 

				}
			}

			function loop() {	

					currentAngle -= ROTATION_RATE; 
	
					// make some particles
					makeParticle(NEW_PARTICLE_RATE); 

					// clear the canvas
					context.clearRect(0,0, SCREEN_WIDTH, SCREEN_HEIGHT);

				  	// iteratate through each particle
					for (i=0; i<particles.length; i++) {
						var particle = particles[i]; 

						// render it
						particle.render(context); 

						// and then update. We always render first so particle
						// appears in the starting point.
						particle.update();
					}

					// Keep taking the oldest particles away until we have 
					// fewer than the maximum allowed. 

					while(particles.length>MAX_PARTICLES){
						particles.shift();
					}
			}


	
			init();
	
	
   });
	
	</script> 

	
</body>
</html>